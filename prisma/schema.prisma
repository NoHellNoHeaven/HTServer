generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// Enum para los roles de usuario
enum Rol {
  Chofer
  Admin
}


model Usuario {
  rut           String  @id
  nombre        String
  p_apellido    String
  m_apellido    String?
  password      String
  email         String  @unique
  telefono      String
  rol           Rol     @default(Chofer)
  licencia      String?
  vencLicencia  DateTime?
  telEmergencia Int?
  direccion     String?
  estado        String?  
}

model Camion {
  patente             String     @id
  tipoCamion          String
  marca               String
  modelo              String
  anio                Int
  color               String
  capacidad           Int?
  nroMotor            String
  nroChasis           String
  fabrica             String
  procedencia         String
  tipoSello           String
  combustible         String
  kilometraje         Int
  fRevisionTecnica    DateTime
  fVencimientoSeguro  DateTime
  permisoCirculacion  DateTime
  estado              String?    

  mantenciones        Mantencion[]
  alertas             Alerta[]
}

model Mantencion {
  id             Int       @id @default(autoincrement())
  patenteCamion  String
  tipoMantencion String
  fecha          DateTime
  descripcion    String
  estado         String?    

  camion         Camion    @relation(fields: [patenteCamion], references: [patente])
}

model Alerta {
  id             Int       @id @default(autoincrement())
  patenteCamion  String
  tipoAlerta     String
  fecha          DateTime
  descripcion    String
  estado         String?   

  camion         Camion    @relation(fields: [patenteCamion], references: [patente])
}
